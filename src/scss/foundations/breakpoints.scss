@use "../lib";

$_breakpointBase: 1px;
$_breakpointXsmall: 576px;
$_breakpointSmall: 768px;
$_breakpointMedium: 992px;
$_breakpointLarge: 1200px;
$_breakpointXlarge: 1920px;

/**
 * The breakpoints of Pyxis
 *
 * @type Map
 * @access private
 */
$_breakpoints: (
  base: $_breakpointBase,
  xsmall: $_breakpointXsmall,
  small: $_breakpointSmall,
  medium: $_breakpointMedium,
  large: $_breakpointLarge,
  xlarge: $_breakpointXlarge
);

/**
 * Breakpoint bounding difference
 *
 * @type Value
 * @access private
 */
$_breakpointBoundDiff: 1px;

/**
 * Returns the $breakpoint value from map $breakpoints
 *
 * @param {String} $breakpoint - Name of breakpoint
 * @return {Value} Representation of breakpoint color
 * @throws {Error}
 *
 * @access public
 */
@function breakpoint($breakpoint) {
  @return lib.mapGetOrDie($_breakpoints, $breakpoint);
}

/**
 * Wraps @content inside a media-query with a min-width and max-width (optional)
 *
 * @param {String} $from - Name of breakpoint
 * @param {String | Boolean} $until - Name of breakpoint
 * @throws {Error}
 *
 * @access public
 */
@mixin mq($from, $until: false) {
  $mediaQuery: "screen and (min-width: #{breakpoint($from)})";

  @if $until {
    $mediaQuery: "#{$mediaQuery} and (max-width: #{breakpoint($until) - $_breakpointBoundDiff})";
  }

  @media #{$mediaQuery} {
    @content;
  }
}